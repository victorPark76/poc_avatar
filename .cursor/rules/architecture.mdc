# ì•„í‚¤í…ì²˜ ê°€ì´ë“œ (Architecture Guide)

> **ì´ ë¬¸ì„œëŠ” í”„ë¡œì íŠ¸ì˜ ì•„í‚¤í…ì²˜ ì„¤ê³„ ì›ì¹™ê³¼ êµ¬ì¡°ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.**

## ğŸ—ï¸ ì•„í‚¤í…ì²˜ ì›ì¹™

### **1. Feature-Based Architecture**

- **ê¸°ëŠ¥ ì¤‘ì‹¬**: ê° ê¸°ëŠ¥ì„ ë…ë¦½ì ì¸ ëª¨ë“ˆë¡œ êµ¬ì„±
- **ì‘ì§‘ë„ ë†’ìŒ**: ê´€ë ¨ëœ ì½”ë“œë¥¼ í•œ ê³³ì— ëª¨ìŒ
- **ê²°í•©ë„ ë‚®ìŒ**: ëª¨ë“ˆ ê°„ ì˜ì¡´ì„± ìµœì†Œí™”

### **2. Atomic Design**

- **Atoms**: ê¸°ë³¸ UI ìš”ì†Œ (Button, Input, Icon)
- **Molecules**: ë³µí•© ì»´í¬ë„ŒíŠ¸ (SearchBar, FormField)
- **Organisms**: í° ë‹¨ìœ„ ì»´í¬ë„ŒíŠ¸ (Header, Sidebar, CharacterList)
- **Templates**: í˜ì´ì§€ ë ˆì´ì•„ì›ƒ
- **Pages**: ì‹¤ì œ í˜ì´ì§€ êµ¬í˜„

### **3. Separation of Concerns**

- **UI**: ì»´í¬ë„ŒíŠ¸ì™€ ìŠ¤íƒ€ì¼ë§
- **Logic**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ìƒíƒœ ê´€ë¦¬
- **Data**: API í˜¸ì¶œê³¼ ë°ì´í„° ì²˜ë¦¬
- **Utils**: ê³µí†µ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜

## ğŸ“ í´ë” êµ¬ì¡° ì„¤ê³„

### **ë£¨íŠ¸ êµ¬ì¡°**

```
src/
â”œâ”€â”€ components/          # ê³µí†µ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ features/            # ê¸°ëŠ¥ë³„ ëª¨ë“ˆ
â”œâ”€â”€ hooks/               # ì»¤ìŠ¤í…€ í›…
â”œâ”€â”€ stores/              # ìƒíƒœ ê´€ë¦¬
â”œâ”€â”€ services/            # API ì„œë¹„ìŠ¤
â”œâ”€â”€ utils/               # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”œâ”€â”€ types/               # íƒ€ì… ì •ì˜
â”œâ”€â”€ constants/           # ìƒìˆ˜ ì •ì˜
â””â”€â”€ assets/              # ì •ì  ìì‚°
```

### **Feature ëª¨ë“ˆ êµ¬ì¡°**

```
src/features/poc_a/
â”œâ”€â”€ components/          # ê¸°ëŠ¥ë³„ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ CharacterManager/
â”‚   â”œâ”€â”€ CloudScene/
â”‚   â””â”€â”€ JsonEditor/
â”œâ”€â”€ hooks/               # ê¸°ëŠ¥ë³„ ì»¤ìŠ¤í…€ í›…
â”œâ”€â”€ stores/              # ê¸°ëŠ¥ë³„ ìƒíƒœ (í•„ìš”ì‹œ)
â”œâ”€â”€ services/            # ê¸°ëŠ¥ë³„ API
â”œâ”€â”€ types/               # ê¸°ëŠ¥ë³„ íƒ€ì…
â”œâ”€â”€ utils/               # ê¸°ëŠ¥ë³„ ìœ í‹¸ë¦¬í‹°
â””â”€â”€ index.tsx            # ì§„ì…ì 
```

### **ì»´í¬ë„ŒíŠ¸ ê³„ì¸µ êµ¬ì¡°**

```
components/
â”œâ”€â”€ atoms/               # ê¸°ë³¸ UI ìš”ì†Œ
â”‚   â”œâ”€â”€ Button/
â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”œâ”€â”€ Button.test.tsx
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ Input/
â”‚   â””â”€â”€ Icon/
â”œâ”€â”€ molecules/            # ë³µí•© ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ SearchBar/
â”‚   â”œâ”€â”€ FormField/
â”‚   â””â”€â”€ Card/
â”œâ”€â”€ organisms/            # í° ë‹¨ìœ„ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ Header/
â”‚   â”œâ”€â”€ Sidebar/
â”‚   â””â”€â”€ CharacterList/
â””â”€â”€ layout/               # ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
    â”œâ”€â”€ MainLayout/
    â””â”€â”€ PageContainer/
```

## ğŸš€ React 19 ìƒˆë¡œìš´ ê¸°ëŠ¥ í™œìš©

### **ì£¼ìš” ë³€ê²½ì‚¬í•­**

#### **1. use í›… (Suspense ê¸°ë°˜ ë°ì´í„° í˜ì¹­)**

- **Promise ì§ì ‘ ì‚¬ìš©**: ì»´í¬ë„ŒíŠ¸ì—ì„œ Promiseë¥¼ ì§ì ‘ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ
- **Suspense í†µí•©**: ë¡œë”© ìƒíƒœë¥¼ Suspenseë¡œ ì²˜ë¦¬
- **ì—ëŸ¬ ê²½ê³„**: ErrorBoundaryì™€ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ ì—ëŸ¬ ì²˜ë¦¬

#### **2. ì»´í¬ë„ŒíŠ¸ ì‘ì„± ë°©ì‹**

- **React.FC ì œê±°**: ë” ì´ìƒ ê¶Œì¥í•˜ì§€ ì•ŠìŒ
- **ëª…ì‹œì  íƒ€ì… ì •ì˜**: ì§ì ‘ props ì¸í„°í˜ì´ìŠ¤ ì •ì˜
- **ìë™ íƒ€ì… ì¶”ë¡ **: TypeScriptì˜ í–¥ìƒëœ íƒ€ì… ì¶”ë¡  í™œìš©

#### **3. ì„±ëŠ¥ ìµœì í™”**

- **ìë™ ë©”ëª¨ì´ì œì´ì…˜**: React 19ì˜ í–¥ìƒëœ ë©”ëª¨ì´ì œì´ì…˜
- **ë²ˆë“¤ í¬ê¸° ê°ì†Œ**: ë” ì‘ì€ ë²ˆë“¤ í¬ê¸°
- **ë¹ ë¥¸ ë Œë”ë§**: í–¥ìƒëœ ë Œë”ë§ ì„±ëŠ¥

### **ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ**

```typescript
// âŒ React 18 ì´ì „ ë°©ì‹
const Component: React.FC<Props> = ({ data }) => {
  const [state, setState] = useState()

  useEffect(() => {
    // ë°ì´í„° í˜ì¹­
  }, [])

  return <div>{data}</div>
}

// âœ… React 19 ê¶Œì¥ ë°©ì‹
const Component = ({ data }: Props) => {
  const [state, setState] = useState()

  // use í›…ìœ¼ë¡œ ë°ì´í„° í˜ì¹­
  const asyncData = use(dataService.getData())

  return <div>{asyncData}</div>
}
```

## ğŸ”„ ìƒíƒœ ê´€ë¦¬ ì•„í‚¤í…ì²˜

### **React 19 + Zustand + React Query ì¡°í•©**

#### **React 19 use í›…ê³¼ì˜ í†µí•©**

```typescript
// âœ… React 19 use í›…ì„ í™œìš©í•œ ë°ì´í„° í˜ì¹­
const CharacterList = () => {
  // React Queryì™€ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ ìºì‹± ë° ë™ê¸°í™”
  const queryClient = useQueryClient()
  const characters = use(characterService.getCharacters())

  // Zustandë¡œ UI ìƒíƒœ ê´€ë¦¬
  const { selectedCharacterId, setSelectedCharacter } = useCharacterStore()

  return (
    <div>
      {characters.map(character => (
        <CharacterCard
          key={character.id}
          character={character}
          isSelected={character.id === selectedCharacterId}
          onSelect={() => setSelectedCharacter(character.id)}
        />
      ))}
    </div>
  )
}
```

```typescript
// ì „ì—­ ìƒíƒœ (Zustand)
interface AppStore {
  // UI ìƒíƒœ
  theme: 'light' | 'dark'
  sidebarOpen: boolean

  // ì•¡ì…˜
  toggleTheme: () => void
  toggleSidebar: () => void
}

// React 19 use í›…ê³¼ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ì„œë¹„ìŠ¤
class CharacterService {
  async getCharacters(): Promise<Character[]> {
    // API í˜¸ì¶œ ë¡œì§
    return fetch('/api/characters').then(res => res.json())
  }

  async getCharacter(id: string): Promise<Character> {
    return fetch(`/api/characters/${id}`).then(res => res.json())
  }
}

// ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©
const CharacterManager = () => {
  const characters = use(characterService.getCharacters())

  return (
    <Suspense fallback={<CharacterListSkeleton />}>
      <CharacterList characters={characters} />
    </Suspense>
  )
}
```

// ì„œë²„ ìƒíƒœ (React Query)
const useCharacters = () => {
return useQuery({
queryKey: ['characters'],
queryFn: characterService.getCharacters,
staleTime: 5 _ 60 _ 1000, // 5ë¶„
})
}

````

### **ìƒíƒœ ë¶„ë¦¬ ì›ì¹™**

- **Zustand**: UI ìƒíƒœ, ì‚¬ìš©ì ì„¤ì •, ì „ì—­ ì„¤ì •
- **React Query**: ì„œë²„ ìƒíƒœ, ìºì‹±, ë™ê¸°í™”
- **Local State**: ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ ìƒíƒœ
- **Form State**: í¼ ìƒíƒœ (React Hook Form ë“±)

## ğŸ¨ UI ì»´í¬ë„ŒíŠ¸ ì•„í‚¤í…ì²˜

### **ì»´í¬ë„ŒíŠ¸ ì„¤ê³„ íŒ¨í„´**

```typescript
// 1. Props ì¸í„°í˜ì´ìŠ¤ ì •ì˜
interface ComponentProps {
  // í•„ìˆ˜ props
  required: string

  // ì„ íƒì  props
  optional?: number

  // ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
  onAction?: (data: any) => void
}

// 2. ê¸°ë³¸ê°’ ì„¤ì •
const defaultProps = {
  optional: 0,
  onAction: () => {},
}

// 3. ì»´í¬ë„ŒíŠ¸ êµ¬í˜„
const Component: React.FC<ComponentProps> = ({
  required,
  optional = defaultProps.optional,
  onAction = defaultProps.onAction,
}) => {
  // êµ¬í˜„ ë¡œì§
}
````

### **ì»´í¬ë„ŒíŠ¸ í•©ì„± íŒ¨í„´**

```typescript
// í•©ì„± ì»´í¬ë„ŒíŠ¸ ì˜ˆì‹œ
const CharacterCard = {
  Root: ({ children, ...props }: CardProps) => (
    <Card {...props}>{children}</Card>
  ),
  Header: ({ children, ...props }: CardHeaderProps) => (
    <div className="card-header" {...props}>{children}</div>
  ),
  Content: ({ children, ...props }: CardContentProps) => (
    <div className="card-content" {...props}>{children}</div>
  ),
}

// ì‚¬ìš© ì˜ˆì‹œ
<CharacterCard.Root>
  <CharacterCard.Header>ìºë¦­í„° ì •ë³´</CharacterCard.Header>
  <CharacterCard.Content>ë‚´ìš©</CharacterCard.Content>
</CharacterCard.Root>
```

## ğŸ”Œ ì„œë¹„ìŠ¤ ë ˆì´ì–´ ì•„í‚¤í…ì²˜

### **API ì„œë¹„ìŠ¤ êµ¬ì¡°**

```typescript
// ê¸°ë³¸ ì„œë¹„ìŠ¤ ì¸í„°í˜ì´ìŠ¤
interface BaseService<T, CreateDto, UpdateDto> {
  getAll(): Promise<T[]>
  getById(id: string): Promise<T | null>
  create(data: CreateDto): Promise<T>
  update(id: string, data: UpdateDto): Promise<T>
  delete(id: string): Promise<boolean>
}

// ìºë¦­í„° ì„œë¹„ìŠ¤ êµ¬í˜„
class CharacterService
  implements BaseService<Character, CreateCharacterDto, UpdateCharacterDto>
{
  async getAll(): Promise<Character[]> {
    // êµ¬í˜„ ë¡œì§
  }

  async getById(id: string): Promise<Character | null> {
    // êµ¬í˜„ ë¡œì§
  }

  // ... ê¸°íƒ€ ë©”ì„œë“œ
}
```

### **ì„œë¹„ìŠ¤ ì˜ì¡´ì„± ì£¼ì…**

```typescript
// ì„œë¹„ìŠ¤ íŒ©í† ë¦¬
class ServiceFactory {
  private static instance: ServiceFactory
  private services: Map<string, any> = new Map()

  static getInstance(): ServiceFactory {
    if (!ServiceFactory.instance) {
      ServiceFactory.instance = new ServiceFactory()
    }
    return ServiceFactory.instance
  }

  getCharacterService(): CharacterService {
    if (!this.services.has('character')) {
      this.services.set('character', new CharacterService())
    }
    return this.services.get('character')
  }
}

// ì‚¬ìš© ì˜ˆì‹œ
const characterService = ServiceFactory.getInstance().getCharacterService()
```

## ğŸ­ ì• ë‹ˆë©”ì´ì…˜ ì•„í‚¤í…ì²˜

### **Three.js (3D) êµ¬ì¡°**

```typescript
// ì”¬ ê´€ë¦¬ì
class SceneManager {
  private scene: THREE.Scene
  private camera: THREE.Camera
  private renderer: THREE.WebGLRenderer

  constructor() {
    this.scene = new THREE.Scene()
    this.camera = new THREE.PerspectiveCamera(
      75,
      window.innerWidth / window.innerHeight,
      0.1,
      1000
    )
    this.renderer = new THREE.WebGLRenderer()
  }

  // ì”¬ ì´ˆê¸°í™”
  init() {
    // ì´ˆê¸°í™” ë¡œì§
  }

  // ì• ë‹ˆë©”ì´ì…˜ ë£¨í”„
  animate() {
    requestAnimationFrame(() => this.animate())
    this.renderer.render(this.scene, this.camera)
  }
}
```

### **PixiJS (2D) êµ¬ì¡°**

```typescript
// ì• ë‹ˆë©”ì´ì…˜ ê´€ë¦¬ì
class AnimationManager {
  private app: PIXI.Application
  private sprites: Map<string, PIXI.Sprite> = new Map()

  constructor() {
    this.app = new PIXI.Application({
      width: 800,
      height: 600,
      backgroundColor: 0x1099bb,
    })
  }

  // ìŠ¤í”„ë¼ì´íŠ¸ ì¶”ê°€
  addSprite(id: string, texture: PIXI.Texture) {
    const sprite = new PIXI.Sprite(texture)
    this.sprites.set(id, sprite)
    this.app.stage.addChild(sprite)
  }

  // ì• ë‹ˆë©”ì´ì…˜ ì¬ìƒ
  playAnimation(id: string, animation: Animation) {
    const sprite = this.sprites.get(id)
    if (sprite) {
      // ì• ë‹ˆë©”ì´ì…˜ ë¡œì§
    }
  }
}
```

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì•„í‚¤í…ì²˜

### **í…ŒìŠ¤íŠ¸ êµ¬ì¡°**

```
src/
â”œâ”€â”€ __tests__/            # í…ŒìŠ¤íŠ¸ íŒŒì¼ë“¤
â”‚   â”œâ”€â”€ components/       # ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ hooks/            # í›… í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ services/         # ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸
â”‚   â””â”€â”€ utils/            # ìœ í‹¸ë¦¬í‹° í…ŒìŠ¤íŠ¸
â”œâ”€â”€ __mocks__/            # ëª¨í‚¹ íŒŒì¼ë“¤
â””â”€â”€ test-utils/           # í…ŒìŠ¤íŠ¸ ìœ í‹¸ë¦¬í‹°
```

### **í…ŒìŠ¤íŠ¸ íŒ¨í„´**

```typescript
// ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸
describe('CharacterCard', () => {
  const defaultProps = {
    character: mockCharacter,
    onEdit: jest.fn(),
    onDelete: jest.fn(),
  }

  it('ìºë¦­í„° ì •ë³´ë¥¼ ì˜¬ë°”ë¥´ê²Œ ë Œë”ë§í•œë‹¤', () => {
    render(<CharacterCard {...defaultProps} />)
    expect(screen.getByText(mockCharacter.name)).toBeInTheDocument()
  })

  it('í¸ì§‘ ë²„íŠ¼ í´ë¦­ ì‹œ onEditì´ í˜¸ì¶œëœë‹¤', () => {
    render(<CharacterCard {...defaultProps} />)
    fireEvent.click(screen.getByText('í¸ì§‘'))
    expect(defaultProps.onEdit).toHaveBeenCalledWith(mockCharacter)
  })
})
```

## ğŸš€ ì„±ëŠ¥ ìµœì í™” ì•„í‚¤í…ì²˜

### **ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…**

```typescript
// ë¼ìš°íŠ¸ë³„ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…
const routes = [
  {
    path: '/poc_a',
    component: React.lazy(() => import('@/features/poc_a')),
  },
  {
    path: '/bon',
    component: React.lazy(() => import('@/features/bon')),
  },
]

// ì»´í¬ë„ŒíŠ¸ë³„ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…
const LazyCharacterManager = React.lazy(() => import('./CharacterManager'))
```

### **ë©”ëª¨ì´ì œì´ì…˜ ì „ëµ**

```typescript
// ì»´í¬ë„ŒíŠ¸ ë©”ëª¨ì´ì œì´ì…˜
const MemoizedCharacterList = React.memo(
  CharacterList,
  (prevProps, nextProps) => {
    // ì»¤ìŠ¤í…€ ë¹„êµ ë¡œì§
    return (
      prevProps.characters.length === nextProps.characters.length &&
      prevProps.selectedId === nextProps.selectedId
    )
  }
)

// í›… ë©”ëª¨ì´ì œì´ì…˜
const useMemoizedCharacters = (characters: Character[]) => {
  return useMemo(() => {
    return characters.filter(char => char.level > 10)
  }, [characters])
}
```

## ğŸ”§ ì„¤ì • ë° í™˜ê²½ ê´€ë¦¬

### **í™˜ê²½ë³„ ì„¤ì •**

```typescript
// í™˜ê²½ ì„¤ì •
interface Config {
  apiUrl: string
  environment: 'development' | 'staging' | 'production'
  debug: boolean
}

const config: Config = {
  development: {
    apiUrl: 'http://localhost:3000',
    environment: 'development',
    debug: true,
  },
  production: {
    apiUrl: 'https://api.production.com',
    environment: 'production',
    debug: false,
  },
}[process.env.NODE_ENV || 'development']
```

### **ê¸°ëŠ¥ í”Œë˜ê·¸**

```typescript
// ê¸°ëŠ¥ í”Œë˜ê·¸ ê´€ë¦¬
interface FeatureFlags {
  enableSpineAnimation: boolean
  enableCloudBackground: boolean
  enableAdvancedEditing: boolean
}

const featureFlags: FeatureFlags = {
  enableSpineAnimation: process.env.REACT_APP_ENABLE_SPINE === 'true',
  enableCloudBackground: process.env.REACT_APP_ENABLE_CLOUD === 'true',
  enableAdvancedEditing: process.env.REACT_APP_ENABLE_ADVANCED === 'true',
}
```

---

> **ì´ ì•„í‚¤í…ì²˜ ê°€ì´ë“œë¥¼ ë”°ë¼ í™•ì¥ ê°€ëŠ¥í•˜ê³  ìœ ì§€ë³´ìˆ˜ ê°€ëŠ¥í•œ ì½”ë“œë¥¼ ì‘ì„±í•©ì‹œë‹¤.**
> description:
> globs:

## alwaysApply: true
